<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="blinded">
<meta name="dcterms.date" content="2024-11-06">

<title>Ethics patches in a box – SDS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="include/smith.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">SDS</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> <i class="bi bi-fa-home" role="img">
</i> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-awards" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-fa-award" role="img">
</i> 
 <span class="menu-text">Awards</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-awards">    
        <li>
    <a class="dropdown-item" href="./awards.html">
 <span class="dropdown-text">Honors &amp; Prizes</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mu_sigma_rho.html">
 <span class="dropdown-text">Mu Sigma Rho</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./rmarkdown_problems.html"> <i class="bi bi-fa-question-circle" role="img">
</i> 
<span class="menu-text">Help</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-writing" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-fa-pencil-alt" role="img">
</i> 
 <span class="menu-text">Writing</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-writing">    
        <li>
    <a class="dropdown-item" href="https://scholarworks.smith.edu/sds/"><i class="bi bi-fa-scroll" role="img">
</i> 
 <span class="dropdown-text">Publications</span></a>
  </li>  
        <li class="dropdown-header">Newsletters</li>
        <li>
    <a class="dropdown-item" href="./sds_newsletter_2024.html">
 <span class="dropdown-text">2024</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sds_newsletter_2023.html">
 <span class="dropdown-text">2023</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sds_newsletter_2022.html">
 <span class="dropdown-text">2022</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sds_newsletter_2021.html">
 <span class="dropdown-text">2021</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sds_newsletter_2020.html">
 <span class="dropdown-text">2020</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sds_newsletter_2019.html">
 <span class="dropdown-text">2019</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sds_newsletter_2018.html">
 <span class="dropdown-text">2018</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sds_newsletter_2017.html">
 <span class="dropdown-text">2017</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./sds_newsletter_2016.html">
 <span class="dropdown-text">2016</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-teaching" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-fa-chalkboard-teacher" role="img">
</i> 
 <span class="menu-text">Teaching</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-teaching">    
        <li>
    <a class="dropdown-item" href="./ethics.html"><i class="bi bi-fa-book" role="img">
</i> 
 <span class="dropdown-text">Ethics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./JSE_calendar.html"><i class="bi bi-fa-calendar-alt" role="img">
</i> 
 <span class="dropdown-text">Calendar</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/SmithCollege-SDS"> <i class="bi bi-fa-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a>
  <ul class="collapse">
  <li><a href="#description-of-coursesetting" id="toc-description-of-coursesetting" class="nav-link" data-scroll-target="#description-of-coursesetting">Description of course/setting</a></li>
  <li><a href="#nas-ethical-areas" id="toc-nas-ethical-areas" class="nav-link" data-scroll-target="#nas-ethical-areas">NAS ethical areas</a></li>
  <li><a href="#questionsgoals-addressed" id="toc-questionsgoals-addressed" class="nav-link" data-scroll-target="#questionsgoals-addressed">Questions/goals addressed</a></li>
  <li><a href="#bloom-taxonomy" id="toc-bloom-taxonomy" class="nav-link" data-scroll-target="#bloom-taxonomy">Bloom taxonomy</a></li>
  <li><a href="#related-work-in-data-science-ethics" id="toc-related-work-in-data-science-ethics" class="nav-link" data-scroll-target="#related-work-in-data-science-ethics">Related work in data science ethics</a></li>
  <li><a href="#generalizability" id="toc-generalizability" class="nav-link" data-scroll-target="#generalizability">Generalizability</a></li>
  </ul></li>
  <li><a href="#lesson-plan-for-instructors" id="toc-lesson-plan-for-instructors" class="nav-link" data-scroll-target="#lesson-plan-for-instructors">Lesson plan for instructors</a>
  <ul class="collapse">
  <li><a href="#student-preparation-required" id="toc-student-preparation-required" class="nav-link" data-scroll-target="#student-preparation-required">Student preparation required</a></li>
  <li><a href="#instructions-for-students" id="toc-instructions-for-students" class="nav-link" data-scroll-target="#instructions-for-students">Instructions for students</a></li>
  <li><a href="#activity-description" id="toc-activity-description" class="nav-link" data-scroll-target="#activity-description">Activity description</a></li>
  <li><a href="#deliverables" id="toc-deliverables" class="nav-link" data-scroll-target="#deliverables">Deliverables</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Ethics patches in a box</h1>
<p class="subtitle lead">Get your fix: Algorithmic bias in shopping for clothes</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>blinded </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 6, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><strong>Disclaimer</strong>: The author of this patch is not being compensated by StitchFix.</p>
<section id="overview" class="level1">
<h1>Overview</h1>
<section id="description-of-coursesetting" class="level2">
<h2 class="anchored" data-anchor-id="description-of-coursesetting">Description of course/setting</h2>
<ul>
<li>Actual: undergraduate machine learning</li>
<li>Generic: any course that involves statistical modeling, such as a 200-level regression course</li>
</ul>
</section>
<section id="nas-ethical-areas" class="level2">
<h2 class="anchored" data-anchor-id="nas-ethical-areas">NAS ethical areas</h2>
<ul>
<li>Privacy and confidentiality</li>
<li>Responsible conduct of research</li>
<li>Ability to detect algorithmic bias</li>
</ul>
</section>
<section id="questionsgoals-addressed" class="level2">
<h2 class="anchored" data-anchor-id="questionsgoals-addressed">Questions/goals addressed</h2>
<ul>
<li>Presents students with an example of algorithmic bias that they can directly play with and relate to. This is in contrast to more abstract and much less accessible examples discussed in academic readings and news media, such as facial recognition software.</li>
<li>Asks students to view the statistical, mathematical, and machine learning topics covered in class through a sociological lens, in particular the nature of gender.</li>
<li>Gives students the opportunity to think about statistical models in a very rich, real, and realistic setting, in particular what predictor variables <span class="math inline">\(\vec{x}\)</span> are (and are not) being collected and what modeling method <span class="math inline">\(\widehat{f}()\)</span> is being used.</li>
</ul>
</section>
<section id="bloom-taxonomy" class="level2">
<h2 class="anchored" data-anchor-id="bloom-taxonomy"><a href="https://en.wikipedia.org/wiki/Bloom%27s_taxonomy#/media/File:Bloom%E2%80%99s_Taxonomy_Verbs.png">Bloom taxonomy</a></h2>
<ul>
<li>Application: Students apply knowledge of data science ethics in real-world context</li>
</ul>
</section>
<section id="related-work-in-data-science-ethics" class="level2">
<h2 class="anchored" data-anchor-id="related-work-in-data-science-ethics">Related work in data science ethics</h2>
<ul>
<li><span class="citation" data-cites="gebru2020race">Gebru (<a href="#ref-gebru2020race" role="doc-biblioref">2020</a>)</span></li>
</ul>
</section>
<section id="generalizability" class="level2">
<h2 class="anchored" data-anchor-id="generalizability">Generalizability</h2>
<p>You can generalize this activity to any internet service where user information is collected for prediction purposes. While this exercise can work in almost any such setting (such as Netflix recommendations), we think it will work best when there is a clear opportunity for comparing and contrasting along some demographic variable, as was the case with StitchFix’s “Style Profile” quiz split along (binary) gender.</p>
</section>
</section>
<section id="lesson-plan-for-instructors" class="level1">
<h1>Lesson plan for instructors</h1>
<section id="student-preparation-required" class="level2">
<h2 class="anchored" data-anchor-id="student-preparation-required">Student preparation required</h2>
<p>Students should have a basic understanding of statistical modeling: <span class="math inline">\(y = f(\vec{x}) + \epsilon\)</span> and <span class="math inline">\(\widehat{y} = \widehat{f}(\vec{x})\)</span> where we have:</p>
<ol type="1">
<li>Outcome variables, both observed <span class="math inline">\(y\)</span> and fitted/predicted <span class="math inline">\(\widehat{y}\)</span></li>
<li>A “true” unknown model <span class="math inline">\(f()\)</span> (i.e.&nbsp;“signal”) and a fitted/approximated model <span class="math inline">\(\widehat{f}()\)</span></li>
<li>Explanatory/predictor variables <span class="math inline">\(\vec{x}\)</span></li>
<li>An error term <span class="math inline">\(\epsilon\)</span> (i.e.&nbsp;noise)</li>
</ol>
<p>Optionally, students who have some familiarity with the difference between “modeling for prediction” and “modeling for explanation” will be well placed to absorb the lessons of this patch. For a broad discussion on this differencel, in particular to what ends each modeling paradigm is used for, instructors and upper-level students can read <span class="citation" data-cites="breiman2001statistical">(<a href="#ref-breiman2001statistical" role="doc-biblioref">Breiman et al. 2001</a>)</span>.</p>
</section>
<section id="instructions-for-students" class="level2">
<h2 class="anchored" data-anchor-id="instructions-for-students">Instructions for students</h2>
<p>In this exercise, you’ll learn that machine learning in practice isn’t as objective as many may think. Because machine learning algorithms are designed by humans for humans, they consequently incorporate many human biases and beliefs.</p>
<p>The context for this exercise will be one many of you can relate to: shopping for clothes. In particular, we’ll focus on <a href="https://www.stitchfix.com/">StitchFix</a>, an online clothing subscription service that uses machine learning to predict which clothes will suit your style and hence are likely to buy. They then send you a “fix” of clothes to try at home and you keep only the ones you want.</p>
<p>Today’s exercise will proceed as follows:</p>
<ol type="1">
<li>You’ll form groups of ideally two students.</li>
<li>We’ll watch the following 4 minute clip from ABC’s <a href="http://abcnews.go.com/Lifestyle/clothing-box-services-stitch-fix-wantable-dia/story?id=49794347">Good Morning America</a> to familiarize ourselves with StitchFix’s business model.<br>
<iframe src="https://www.goodmorningamerica.com/video/embed/49810458" width="640" height="360" scrolling="no" style="border:none;" allowfullscreen=""></iframe><br>
</li>
<li>In groups you’ll go to <a href="https://www.stitchfix.com/">StitchFix</a> and complete the “Style Profile” quiz that collects information about your clothing preferences as follows:
<ol type="1">
<li>One of you will sign up for StitchFix.</li>
<li>Together you’ll both complete the quiz for one of the (binary) choices of gender: men or women.</li>
<li>The other group member will then sign up for StitchFix.</li>
<li>Together you’ll both complete the quiz for the <em>other</em> choice of gender. Make note of any differences you find interesting.</li>
</ol></li>
<li>We’ll have a class discussion relating this experience to the topics we’ve been learning in class and the notion of <em>algorithmic bias</em>.</li>
</ol>
</section>
<section id="activity-description" class="level2">
<h2 class="anchored" data-anchor-id="activity-description">Activity description</h2>
<p>This activity can be self-contained in a single 50 minute lecture as follows:</p>
<ol type="1">
<li>(5 minutes): Give students above instructions.</li>
<li>(5 minutes): Watch clip from <em>Good Morning America</em>.</li>
<li>(20 minutes): Have the student groups complete both the men’s and women’s “Style Profile” quiz.</li>
<li>(10 minutes): Class discussion. Potential prompts include:
<ul>
<li>“What sociological biases and beliefs are embedded in the quizzes?” There are too many to enumerate and thus we recommend the instructor complete both quizzes beforehand to get a sense for themselves.</li>
<li>“What predictor variables are being collected in the quizzes both directly as well as indirectly?” Examples of the latter include date/time (hence season), browser/operating system (these are weakly tied with technological sophistication and income), and shipping address (hence climate).</li>
<li>“What are the principal components to consider when buying clothes?” In our opinion, the user’s style (patterns, cuts, colors), fit (lengths, proportions), and budget.</li>
<li>“What modeling method <span class="math inline">\(\widehat{f}()\)</span> do you think is being used by StitchFix?” While <span class="math inline">\(\widehat{f}()\)</span> is proprietary to StitchFix and thus unknown, given the initial prompt for the user to select “men” or “women”, at the very highest level <span class="math inline">\(\widehat{f}()\)</span> is a decision tree a split on gender encoded as a binary variable.</li>
<li>“What crucial predictor variable <span class="math inline">\(\vec{x}\)</span> can StitchFix only collect after they’ve sent you your first fix?” Examples include which clothes you keep, which clothes you return, and the ratings/feedback you give.</li>
<li>“What is being predicted by these models and what is being <em>reinforced</em>?” A much more rhetorical question.</li>
</ul></li>
<li>(5 minutes): Give a brief lecture on algorithmic bias.</li>
<li>(5 minutes): Give students instructions on the reflection piece they need to submit.</li>
</ol>
</section>
<section id="deliverables" class="level2">
<h2 class="anchored" data-anchor-id="deliverables">Deliverables</h2>
<p>A reflection piece written by students summarizing their experiences and thoughts, ideally addressing the questions and goals in the previous section.</p>
</section>
</section>
<section id="references" class="level1">




</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-breiman2001statistical" class="csl-entry" role="listitem">
Breiman, Leo et al. 2001. <span>“Statistical Modeling: The Two Cultures (with Comments and a Rejoinder by the Author).”</span> <em>Statistical Science</em> 16 (3): 199–231. <a href="https://projecteuclid.org/download/pdf_1/euclid.ss/1009213726">https://projecteuclid.org/download/pdf_1/euclid.ss/1009213726</a>.
</div>
<div id="ref-gebru2020race" class="csl-entry" role="listitem">
Gebru, Timnit. 2020. <span>“Race and Gender.”</span> In <em>The Oxford Handbook of Ethics of <span>AI</span></em>, edited by Markus D. Dubber, Frank Pasquale, and Sunit Das, 251–69. Oxford University Press. <a href="https://doi.org/10.1093/oxfordhb/9780190067397.013.16">https://doi.org/10.1093/oxfordhb/9780190067397.013.16</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Website maintained by <a href="http://www.science.smith.edu/~bbaumer">Ben Baumer</a>.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/SmithCollege-SDS/sds-www">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>